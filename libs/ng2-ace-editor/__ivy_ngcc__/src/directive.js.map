{"version":3,"sources":["F:/Test/Angular Version/angular-9/libs/ng2-ace-editor/src/directive.js"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;qCA8MqC,AAG1B;;;;;;;;;;;;;;;;;;;;;;;;;;;;4DAEgB","file":"directive.js","sourcesContent":["var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nimport { Directive, EventEmitter, Output, ElementRef, Input, NgZone } from \"@angular/core\";\nimport \"brace\";\nimport \"brace/theme/monokai\";\nvar AceEditorDirective = /** @class */ (function () {\n    function AceEditorDirective(elementRef, zone) {\n        var _this = this;\n        this.zone = zone;\n        this.textChanged = new EventEmitter();\n        this.textChange = new EventEmitter();\n        this._options = {};\n        this._readOnly = false;\n        this._theme = \"monokai\";\n        this._mode = \"html\";\n        this._autoUpdateContent = true;\n        this._durationBeforeCallback = 0;\n        this._text = \"\";\n        var el = elementRef.nativeElement;\n        this.zone.runOutsideAngular(function () {\n            _this.editor = ace[\"edit\"](el);\n        });\n        this.editor.$blockScrolling = Infinity;\n    }\n    AceEditorDirective.prototype.ngOnInit = function () {\n        this.init();\n        this.initEvents();\n    };\n    AceEditorDirective.prototype.ngOnDestroy = function () {\n        this.editor.destroy();\n    };\n    AceEditorDirective.prototype.init = function () {\n        this.editor.setOptions(this._options || {});\n        this.editor.setTheme(\"ace/theme/\" + this._theme);\n        this.setMode(this._mode);\n        this.editor.setReadOnly(this._readOnly);\n    };\n    AceEditorDirective.prototype.initEvents = function () {\n        var _this = this;\n        this.editor.on('change', function () { return _this.updateText(); });\n        this.editor.on('paste', function () { return _this.updateText(); });\n    };\n    AceEditorDirective.prototype.updateText = function () {\n        var _this = this;\n        var newVal = this.editor.getValue();\n        if (newVal === this.oldText) {\n            return;\n        }\n        if (!this._durationBeforeCallback) {\n            this._text = newVal;\n            this.zone.run(function () {\n                _this.textChange.emit(newVal);\n                _this.textChanged.emit(newVal);\n            });\n        }\n        else {\n            if (this.timeoutSaving != null) {\n                clearTimeout(this.timeoutSaving);\n            }\n            this.timeoutSaving = setTimeout(function () {\n                _this._text = newVal;\n                _this.zone.run(function () {\n                    _this.textChange.emit(newVal);\n                    _this.textChanged.emit(newVal);\n                });\n                _this.timeoutSaving = null;\n            }, this._durationBeforeCallback);\n        }\n        this.oldText = newVal;\n    };\n    Object.defineProperty(AceEditorDirective.prototype, \"options\", {\n        set: function (options) {\n            this._options = options;\n            this.editor.setOptions(options || {});\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AceEditorDirective.prototype, \"readOnly\", {\n        set: function (readOnly) {\n            this._readOnly = readOnly;\n            this.editor.setReadOnly(readOnly);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AceEditorDirective.prototype, \"theme\", {\n        set: function (theme) {\n            this._theme = theme;\n            this.editor.setTheme(\"ace/theme/\" + theme);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AceEditorDirective.prototype, \"mode\", {\n        set: function (mode) {\n            this.setMode(mode);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    AceEditorDirective.prototype.setMode = function (mode) {\n        this._mode = mode;\n        if (typeof this._mode === 'object') {\n            this.editor.getSession().setMode(this._mode);\n        }\n        else {\n            this.editor.getSession().setMode(\"ace/mode/\" + this._mode);\n        }\n    };\n    Object.defineProperty(AceEditorDirective.prototype, \"text\", {\n        get: function () {\n            return this._text;\n        },\n        set: function (text) {\n            this.setText(text);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    AceEditorDirective.prototype.setText = function (text) {\n        if (this._text !== text) {\n            if (text === null || text === undefined) {\n                text = \"\";\n            }\n            if (this._autoUpdateContent === true) {\n                this._text = text;\n                this.editor.setValue(text);\n                this.editor.clearSelection();\n            }\n        }\n    };\n    Object.defineProperty(AceEditorDirective.prototype, \"autoUpdateContent\", {\n        set: function (status) {\n            this._autoUpdateContent = status;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AceEditorDirective.prototype, \"durationBeforeCallback\", {\n        set: function (num) {\n            this.setDurationBeforeCallback(num);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    AceEditorDirective.prototype.setDurationBeforeCallback = function (num) {\n        this._durationBeforeCallback = num;\n    };\n    Object.defineProperty(AceEditorDirective.prototype, \"aceEditor\", {\n        get: function () {\n            return this.editor;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    __decorate([\n        Output(),\n        __metadata(\"design:type\", Object)\n    ], AceEditorDirective.prototype, \"textChanged\", void 0);\n    __decorate([\n        Output(),\n        __metadata(\"design:type\", Object)\n    ], AceEditorDirective.prototype, \"textChange\", void 0);\n    __decorate([\n        Input(),\n        __metadata(\"design:type\", Object),\n        __metadata(\"design:paramtypes\", [Object])\n    ], AceEditorDirective.prototype, \"options\", null);\n    __decorate([\n        Input(),\n        __metadata(\"design:type\", Object),\n        __metadata(\"design:paramtypes\", [Object])\n    ], AceEditorDirective.prototype, \"readOnly\", null);\n    __decorate([\n        Input(),\n        __metadata(\"design:type\", Object),\n        __metadata(\"design:paramtypes\", [Object])\n    ], AceEditorDirective.prototype, \"theme\", null);\n    __decorate([\n        Input(),\n        __metadata(\"design:type\", Object),\n        __metadata(\"design:paramtypes\", [Object])\n    ], AceEditorDirective.prototype, \"mode\", null);\n    __decorate([\n        Input(),\n        __metadata(\"design:type\", String),\n        __metadata(\"design:paramtypes\", [String])\n    ], AceEditorDirective.prototype, \"text\", null);\n    __decorate([\n        Input(),\n        __metadata(\"design:type\", Object),\n        __metadata(\"design:paramtypes\", [Object])\n    ], AceEditorDirective.prototype, \"autoUpdateContent\", null);\n    __decorate([\n        Input(),\n        __metadata(\"design:type\", Number),\n        __metadata(\"design:paramtypes\", [Number])\n    ], AceEditorDirective.prototype, \"durationBeforeCallback\", null);\n    AceEditorDirective = __decorate([\n        Directive({\n            selector: '[ace-editor]'\n        }),\n        __metadata(\"design:paramtypes\", [ElementRef, NgZone])\n    ], AceEditorDirective);\n    return AceEditorDirective;\n}());\nexport { AceEditorDirective };\n"]}